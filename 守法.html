<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®ˆæŠ¤æœªæ¥ - ç¦æ­¢å‘æœªæˆå¹´äººå”®çƒŸ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', 'å¾®è½¯é›…é»‘', Arial, sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .game-container {
            max-width: 800px;
            width: 100%;
            padding: 30px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .game-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
            position: relative;
        }

        .game-header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
            font-weight: 300;
        }

        .game-content {
            min-height: 400px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .scene-image {
            width: 100%;
            max-width: 600px;
            height: auto;
            border-radius: 8px;
            margin: 20px auto;
            display: block;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border: 3px solid #3498db;
        }

        .image-caption {
            text-align: center;
            color: #666;
            font-size: 14px;
            margin-top: 10px;
            margin-bottom: 20px;
        }

        .story-text {
            font-size: 1.1em;
            margin-bottom: 25px;
            text-align: justify;
            line-height: 1.8;
            background: rgba(255, 255, 255, 0.7);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .choices {
            display: grid;
            gap: 15px;
            margin-top: 30px;
        }

        .choice-btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .choice-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            background: linear-gradient(135deg, #2980b9, #1f6399);
        }

        .choice-btn:active {
            transform: translateY(0);
        }

        .audio-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            margin-bottom: 20px;
        }

        .result-message {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }

        .positive-result {
            border-left-color: #27ae60;
            background: #d5f4e6;
        }

        .negative-result {
            border-left-color: #e74c3c;
            background: #fadbd8;
        }

        .game-footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            color: #7f8c8d;
        }

        .restart-btn {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .score-display {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(52, 152, 219, 0.9);
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .game-container {
                padding: 15px;
            }
            
            .game-header h1 {
                font-size: 2em;
            }
            
            .choice-btn {
                padding: 12px 20px;
                font-size: 0.95em;
            }
            
            .score-display {
                position: relative;
                top: 0;
                right: 0;
                display: inline-block;
                margin-bottom: 15px;
            }
        }

        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .law-info {
            background: #f8f9fa;
            border-left: 4px solid #e74c3c;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <header class="game-header">
            <h1>å®ˆæŠ¤æœªæ¥</h1>
            <p class="subtitle">ç¦æ­¢å‘æœªæˆå¹´äººå”®çƒŸ</p>
            <div class="score-display">è¯šä¿¡ç§¯åˆ†: <span id="score">100</span></div>
        </header>
        
        <main class="game-content" id="game-content">
            <!-- æ¸¸æˆå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
        </main>
        
        <footer class="game-footer">
            <p>Â© 2024 å®ˆæŠ¤æœªæˆå¹´äººå¥åº· - æœ¬æ¸¸æˆç”¨äºå®£ä¼ æ•™è‚²ç›®çš„</p>
        </footer>
    </div>
    
    <script>
        // æ¸¸æˆæ•°æ®
        const gameData = {
            start: {
                title: "é‡æ–°å¼€å§‹",
                image: "https://images.unsplash.com/photo-1607083206968-13611e3d76db?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                content: `ä¸‹åˆæ”¾å­¦æ—¶é—´ï¼Œä¸€ä¸ªç©¿ç€æ ¡æœçš„å­¦ç”Ÿèµ°è¿›åº—é‡Œï¼Œç¥æƒ…æœ‰äº›ç´§å¼ ã€‚
        "è€æ¿ï¼Œä¹°åŒ…'ä¸­å'ã€‚"å­¦ç”Ÿè¯´ç€æå‡ºé’±ã€‚`,
                choices: [
                    { text: "å©‰è¨€æ‹’ç»", next: "refuse" },
                    { text: "è¦æ±‚å‡ºç¤ºèº«ä»½è¯", next: "askId" },
                    { text: "æ•™è‚²åŠå¯¼", next: "educate" },
                    { text: "è¯¢é—®æ˜¯å¦å¸®å®¶äººè´­ä¹°", next: "askFamily" },
                    { text: "æŸ¥çœ‹é—¨å¤–æƒ…å†µ", next: "checkOutside" }
                ],
                audio: "https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3"
            },
            
            refuse: {
                content: `ä½ æ¸©å’Œä½†åšå®šåœ°è¯´ï¼š"åŒå­¦ï¼Œå¯¹ä¸èµ·ï¼Œæ³•å¾‹è§„å®šä¸èƒ½å‘æœªæˆå¹´äººå”®çƒŸã€‚"

        å­¦ç”Ÿæ„£äº†ä¸€ä¸‹ï¼Œä½å¤´ç¦»å¼€äº†ã€‚

        ç¬¬äºŒå¤©ï¼Œ

        å­¦ç”Ÿå®¶é•¿ä¸“é—¨æ¥åº—é‡Œæ„Ÿè°¢ä½ ï¼š"è€æ¿ï¼Œè°¢è°¢ä½ æ²¡æœ‰å–çƒŸç»™å­©å­ï¼Œæˆ‘ä»¬ä¸€å®šå¥½å¥½æ•™è‚²ä»–ï¼"

        å®¢æˆ·ç»ç†ä¹Ÿè¡¨æ‰¬ä½ ï¼š"æ‚¨æ ‘ç«‹äº†å®ˆæ³•ç»è¥çš„æ¦œæ ·ï¼"`,
                choices: [
                    { text: "ç»§ç»­", next: "honestStar" }
                ],
                scoreChange: 20
            },
            
            askId: {
                content: `ä½ è®¤çœŸåœ°è¯´ï¼š"è¯·å‡ºç¤ºèº«ä»½è¯ï¼Œæˆ‘ä»¬éœ€è¦æ ¸å®å¹´é¾„ã€‚"

        å­¦ç”Ÿç¿»æ‰¾å£è¢‹ï¼Œæ”¯æ”¯å¾å¾ï¼š"æˆ‘...æˆ‘æ²¡å¸¦èº«ä»½è¯ã€‚"

        "æ²¡æœ‰èº«ä»½è¯ä¸èƒ½è´­ä¹°ï¼Œè¿™æ˜¯è§„å®šã€‚"ä½ è§£é‡Šé“ã€‚

        å­¦ç”Ÿæ— å¥ˆåœ°ç¦»å¼€ã€‚åæ¥å¸‚åœºç›‘ç®¡äººå‘˜å·¡æŸ¥æ—¶ï¼Œè‚¯å®šäº†ä½ çš„ä¸¥æ ¼æŠŠå…³ã€‚`,
                choices: [
                    { text: "ç»§ç»­", next: "correctChoice" }
                ],
                scoreChange: 15
            },
            
            educate: {
                content: `ä½ å…³åˆ‡åœ°è¯´ï¼š"åŒå­¦ï¼Œå¸çƒŸæœ‰å®³å¥åº·ï¼Œç‰¹åˆ«æ˜¯å¯¹ä½ ä»¬æ­£åœ¨å‘è‚²çš„èº«ä½“ã€‚è€Œä¸”å‘æœªæˆå¹´äººå”®çƒŸæ˜¯è¿æ³•çš„ï¼Œè¯·ç†è§£ã€‚"

        å­¦ç”Ÿçº¢ç€è„¸è¯´ï¼š"å¯¹ä¸èµ·ï¼Œæˆ‘çŸ¥é“äº†ã€‚"ç„¶åå¿«æ­¥ç¦»å¼€ã€‚

        ä¸€å‘¨åï¼Œå­¦æ ¡è€å¸ˆæ¥åº—é‡‡è´­æ—¶æåˆ°ï¼š"å¬è¯´æ‚¨æ•™è‚²äº†æˆ‘ä»¬çš„å­¦ç”Ÿï¼Œè°¢è°¢æ‚¨å¸®æˆ‘ä»¬å®ˆæŠ¤å­©å­ï¼"`,
                choices: [
                    { text: "ç»§ç»­", next: "guardResponsibility" }
                ],
                scoreChange: 25
            },
            
            askFamily: {
                content: `ä½ è°¨æ…åœ°é—®ï¼š"æ˜¯å¸®å®¶é‡Œäººä¹°å—ï¼Ÿ"

        å­¦ç”Ÿç«‹å³ç‚¹å¤´ï¼š"å¯¹å¯¹ï¼Œå¸®æˆ‘çˆ·çˆ·ä¹°ï¼Œä»–è…¿è„šä¸æ–¹ä¾¿ã€‚"`,
                choices: [
                    { text: "ç›¸ä¿¡å­©å­çš„è¯", next: "believeChild" },
                    { text: "è¦æ±‚å®¶äººäº²è‡ªæ¥", next: "askFamilyCome" }
                ]
            },
            
            checkOutside: {
                content: `ä½ æ³¨æ„åˆ°åº—å¤–æœ‰ä¸ªä¸­å¹´ç”·å­åœ¨å¼ æœ›ï¼Œä¼¼ä¹æ˜¯å­¦ç”Ÿçš„çˆ¶äº²ã€‚

        å­¦ç”Ÿå‚¬ä¿ƒï¼š"å¿«ç‚¹å„¿ï¼Œæˆ‘çˆ¸åœ¨å¤–é¢ç­‰ç€å‘¢ï¼"`,
                choices: [
                    { text: "ç›´æ¥å–çƒŸ", next: "sellDirectly" },
                    { text: "è¯·çˆ¶äº²è¿›æ¥ç¡®è®¤", next: "askFatherConfirm" }
                ]
            },
            
            honestStar: {
                content: `å› ä¸¥æ ¼éµå®ˆæœªæˆå¹´äººä¿æŠ¤è§„å®šï¼Œ

        æˆä¸º"è¯šä¿¡ç¤ºèŒƒæˆ·"ï¼`,
                choices: [
                    { text: "é‡æ–°å¼€å§‹", next: "start" }
                ],
                scoreChange: 30
            },
            
            correctChoice: {
                content: `è™½ç„¶å¤±å»äº†è¿™å•ç”Ÿæ„ï¼Œä½†ä½ ç»´æŠ¤äº†æ³•å¾‹å°Šä¸¥ã€‚

        "çŸ­æœŸçœ‹å°‘èµšä¸€ç‚¹ï¼Œé•¿æœŸçœ‹èµ¢å¾—ä¿¡èª‰ï¼"ä½ åšä¿¡ã€‚`,
                choices: [
                    { text: "é‡æ–°å¼€å§‹", next: "start" }
                ],
                scoreChange: 10
            },
            
            guardResponsibility: {
                content: `ä½ æ„è¯†åˆ°ï¼šå®ˆæŠ¤æœªæˆå¹´äººä¸ä»…æ˜¯æ³•å¾‹è¦æ±‚ï¼Œæ›´æ˜¯ç¤¾ä¼šè´£ä»»ã€‚

        ä½ åœ¨æ”¶é“¶å°è´´äº†æ›´é†’ç›®çš„"ç¦æ­¢å‘æœªæˆå¹´äººå”®çƒŸ"æ ‡è¯†ã€‚`,
                choices: [
                    { text: "é‡æ–°å¼€å§‹", next: "start" }
                ],
                scoreChange: 15
            },
            
            believeChild: {
                content: `ä½ å¿ƒæƒ³ï¼š"å­©å­è¿™ä¹ˆå­é¡ºï¼Œåº”è¯¥æ²¡é—®é¢˜ã€‚"äºæ˜¯æŠŠçƒŸå–ç»™äº†å­¦ç”Ÿã€‚

        å‡ å¤©åï¼Œä½ åœ¨å­¦æ ¡é™„è¿‘çœ‹åˆ°è¿™ä¸ªå­¦ç”Ÿæ­£åœ¨æŠ½çƒŸï¼åŸæ¥ä»–æ˜¯è‡ªå·±æŠ½çš„ã€‚

        å¸‚åœºç›‘ç®¡éƒ¨é—¨æ¥åˆ°ä¸¾æŠ¥ï¼Œå¯¹ä½ è¿›è¡Œäº†è­¦å‘Šå¤„ç½šã€‚`,
                choices: [
                    { text: "ç»§ç»­", next: "smallProfitBigLoss" }
                ],
                scoreChange: -30
            },
            
            askFamilyCome: {
                content: `ä½ åšæŒè¯´ï¼š"è®©ä½ çˆ·çˆ·äº²è‡ªæ¥ä¹°å§ï¼Œæˆ–è€…ä½ å¸¦æˆ‘å»è§è§ä»–ã€‚"

        å­¦ç”Ÿæ”¯æ”¯å¾å¾ï¼Œæœ€åæ‰¿è®¤ï¼š"å…¶å®...æ˜¯æˆ‘è‡ªå·±æƒ³æŠ½ã€‚"ç„¶åç¾æ„§åœ°è·‘å¼€äº†ã€‚

        å®¢æˆ·ç»ç†å¾—çŸ¥åè¯´ï¼š"æ‚¨åšå¾—å¯¹ï¼Œè¿™ç§å€Ÿå£å¾ˆå¸¸è§ï¼Œå¿…é¡»æ ¸å®æ¸…æ¥šï¼"`,
                choices: [
                    { text: "ç»§ç»­", next: "industryPositive" }
                ],
                scoreChange: 20
            },
            
            smallProfitBigLoss: {
                content: `å› è¿è§„å”®çƒŸï¼Œ

        ä½ çš„è¯šä¿¡è®°å½•å—æŸï¼Œ

        æ”¶åˆ°å¸‚åœºç›‘ç£ç®¡ç†å±€ç½šæ¬¾å•ï¼Œ

        æŸå¤±è¿œå¤§äºé‚£åŒ…çƒŸçš„åˆ©æ¶¦ã€‚`,
                choices: [
                    { text: "é‡æ–°å¼€å§‹", next: "start" }
                ],
                scoreChange: -40
            },
            
            industryPositive: {
                content: `ä½ çš„åšæ³•ä¼ æ’­å¼€æ¥ï¼Œ

        å¸¦åŠ¨æ›´å¤šé›¶å”®æˆ·å…±åŒå®ˆæŠ¤æœªæˆå¹´äººçš„å¥åº·ã€‚`,
                choices: [
                    { text: "é‡æ–°å¼€å§‹", next: "start" }
                ],
                scoreChange: 25
            },
            
            sellDirectly: {
                content: `ä½ çœ‹äº†ä¸€çœ¼é—¨å¤–çš„ç”·å­ï¼Œè§‰å¾—æœ‰å¤§äººé™ªåŒåº”è¯¥æ²¡é—®é¢˜ï¼Œå°±æŠŠçƒŸå–ç»™äº†å­¦ç”Ÿã€‚

        åæ¥æ‰å‘ç°ï¼Œé‚£ä¸ªç”·å­åªæ˜¯è·¯è¿‡ï¼Œå­¦ç”Ÿæ ¹æœ¬ä¸è®¤è¯†ä»–ï¼å­©å­æ˜¯è‡ªå·±æƒ³æŠ½çƒŸã€‚

        ä½ å› å‘æœªæˆå¹´äººå”®çƒŸè¢«å¤„ä»¥ç½šæ¬¾ã€‚`,
                choices: [
                    { text: "ç»§ç»­", next: "businessLesson" }
                ],
                scoreChange: -35
            },
            
            askFatherConfirm: {
                content: `ä½ å¯¹å­¦ç”Ÿè¯´ï¼š"è¯·ä½ çˆ¸çˆ¸è¿›æ¥ä¸€ä¸‹ï¼Œæˆ‘éœ€è¦ç¡®è®¤ã€‚"

        å­¦ç”Ÿè„¸è‰²ä¸€å˜ï¼Œæ­£è¦è¯´ä»€ä¹ˆï¼Œé—¨å¤–çš„ç”·å­èµ°è¿›æ¥ï¼š"æ€ä¹ˆäº†ï¼Ÿ"

        ä½ è¯´æ˜æƒ…å†µåï¼Œçˆ¶äº²ç”Ÿæ°”åœ°å¯¹å­©å­è¯´ï¼š"ä½ åˆæ’’è°ï¼"ç„¶åå‘ä½ é“æ­‰ï¼š"å¯¹ä¸èµ·ï¼Œå­©å­ä¸æ‡‚äº‹ï¼Œè°¢è°¢æ‚¨è¿™ä¹ˆè´Ÿè´£ï¼"`,
                choices: [
                    { text: "ç»§ç»­", next: "valueReflection" }
                ],
                scoreChange: 25
            },
            
            businessLesson: {
                content: `è¿™æ¬¡ç»å†è®©ä½ æ·±åˆ»æ˜ç™½ï¼š

        ä»»ä½•æ—¶å€™éƒ½ä¸èƒ½å‘æœªæˆå¹´äººå”®çƒŸï¼Œ

        å³ä½¿çœ‹ä¼¼æœ‰å¤§äººé™ªåŒä¹Ÿè¦æ ¸å®ã€‚`,
                choices: [
                    { text: "é‡æ–°å¼€å§‹", next: "start" }
                ],
                scoreChange: -20
            },
            
            valueReflection: {
                content: `ä½ çš„è´Ÿè´£ä»»æ€åº¦èµ¢å¾—äº†èº«è¾¹ä½æˆ·çš„å°Šé‡ï¼Œ

        ç”Ÿæ„åè€Œæ›´å¥½äº†ã€‚`,
                choices: [
                    { text: "é‡æ–°å¼€å§‹", next: "start" }
                ],
                scoreChange: 30
            }
        };

        // æ¸¸æˆçŠ¶æ€
        let currentScore = 100;

        // éŸ³é¢‘æ’­æ”¾å‡½æ•°
        function playAudio(url) {
            try {
                const audio = new Audio(url);
                audio.play().catch(e => {
                    console.log('éŸ³é¢‘æ’­æ”¾å¤±è´¥:', e);
                });
            } catch (error) {
                console.log('éŸ³é¢‘æ’­æ”¾é”™è¯¯:', error);
            }
        }

        // æ›´æ–°åˆ†æ•°æ˜¾ç¤º
        function updateScoreDisplay() {
            document.getElementById('score').textContent = currentScore;
            
            // æ ¹æ®åˆ†æ•°æ”¹å˜é¢œè‰²
            const scoreElement = document.getElementById('score');
            if (currentScore >= 80) {
                scoreElement.style.color = '#27ae60';
            } else if (currentScore >= 60) {
                scoreElement.style.color = '#f39c12';
            } else {
                scoreElement.style.color = '#e74c3c';
            }
        }

        // æ¸²æŸ“åœºæ™¯
        function renderScene(sceneId) {
            const scene = gameData[sceneId];
            const contentDiv = document.getElementById('game-content');
            
            let html = `
                <div class="scene-content fade-in">
            `;
            
            // æ·»åŠ å›¾ç‰‡ï¼ˆå¦‚æœæœ‰ï¼‰
            if (scene.image) {
                html += `
                    <img src="${scene.image}" alt="åœºæ™¯å›¾ç‰‡" class="scene-image">
                    <p class="image-caption">å›¾ï¼šé›¶å”®åº—å†…</p>
                `;
            }
            
            // æ·»åŠ éŸ³é¢‘æŒ‰é’®ï¼ˆå¦‚æœæœ‰ï¼‰
            if (scene.audio) {
                html += `
                    <button class="choice-btn audio-btn" onclick="playAudio('${scene.audio}')">
                        ğŸ”Š æ’­æ”¾åœºæ™¯éŸ³æ•ˆ
                    </button>
                `;
            }
            
            // æ·»åŠ å†…å®¹
            html += `
                <div class="story-text">${scene.content.replace(/\n/g, '<br>')}</div>
            `;
            
            // æ·»åŠ æ³•å¾‹æç¤ºï¼ˆæŸäº›åœºæ™¯ï¼‰
            if (sceneId === 'start') {
                html += `
                    <div class="law-info">
                        <strong>æ³•å¾‹æç¤ºï¼š</strong>æ ¹æ®ã€Šä¸­åäººæ°‘å…±å’Œå›½æœªæˆå¹´äººä¿æŠ¤æ³•ã€‹è§„å®šï¼Œç¦æ­¢å‘æœªæˆå¹´äººå‡ºå”®çƒŸé…’ã€‚è¿åè€…å°†é¢ä¸´ç½šæ¬¾ç­‰å¤„ç½šã€‚
                    </div>
                `;
            }
            
            // æ·»åŠ é€‰æ‹©æŒ‰é’®
            if (scene.choices && scene.choices.length > 0) {
                html += `<div class="choices">`;
                scene.choices.forEach(choice => {
                    html += `
                        <button class="choice-btn" onclick="handleChoice('${choice.next}')">
                            ${choice.text}
                        </button>
                    `;
                });
                html += `</div>`;
            }
            
            html += `</div>`;
            
            contentDiv.innerHTML = html;
            
            // è‡ªåŠ¨æ’­æ”¾åœºæ™¯éŸ³é¢‘
            if (scene.audio) {
                setTimeout(() => playAudio(scene.audio), 500);
            }
            
            // æ›´æ–°åˆ†æ•°ï¼ˆå¦‚æœæœ‰å˜åŒ–ï¼‰
            if (scene.scoreChange) {
                currentScore += scene.scoreChange;
                // ç¡®ä¿åˆ†æ•°åœ¨åˆç†èŒƒå›´å†…
                currentScore = Math.max(0, Math.min(200, currentScore));
                updateScoreDisplay();
                
                // æ˜¾ç¤ºåˆ†æ•°å˜åŒ–
                if (scene.scoreChange > 0) {
                    showMessage(`+${scene.scoreChange} è¯šä¿¡ç§¯åˆ†`, 'positive');
                } else if (scene.scoreChange < 0) {
                    showMessage(`${scene.scoreChange} è¯šä¿¡ç§¯åˆ†`, 'negative');
                }
            }
        }

        // å¤„ç†é€‰æ‹©
        function handleChoice(nextScene) {
            renderScene(nextScene);
        }

        // æ˜¾ç¤ºæ¶ˆæ¯
        function showMessage(message, type) {
            const messageDiv = document.createElement('div');
            messageDiv.textContent = message;
            messageDiv.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                padding: 10px 20px;
                border-radius: 5px;
                color: white;
                font-weight: bold;
                z-index: 1000;
                animation: fadeIn 0.5s, fadeOut 0.5s 2.5s forwards;
            `;
            
            if (type === 'positive') {
                messageDiv.style.background = '#27ae60';
            } else {
                messageDiv.style.background = '#e74c3c';
            }
            
            document.body.appendChild(messageDiv);
            
            // 3ç§’åç§»é™¤æ¶ˆæ¯
            setTimeout(() => {
                if (document.body.contains(messageDiv)) {
                    document.body.removeChild(messageDiv);
                }
            }, 3000);
        }

        // åˆå§‹åŒ–æ¸¸æˆ
        document.addEventListener('DOMContentLoaded', function() {
            renderScene('start');
            updateScoreDisplay();
        });
    </script>
</body>
</html>